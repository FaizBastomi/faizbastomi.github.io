<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Winrate Calculator Mobile Legends</title>
    <link rel="canonical" href="https://faizdev.my.id/">
    <meta property="og:url" content="https://faizdev.my.id/">
    <meta property="og:title" content="Winrate Calculator">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://faizdev.my.id/assets/img/photo.jpeg">
    <link rel="icon" type="image/jpeg" sizes="16x16" href="/assets/img/favion_16.jpeg">
    <link rel="icon" type="image/jpeg" sizes="32x32" href="/assets/img/favicon_32.jpeg">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Custom Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/styles.css">
</head>

<body>
    <div class="d-flex flex-column min-vh-100 min-vw-100">
        <div class="d-flex flex-grow-1 justify-content-center align-items-center">
            <div id="profile-box" class="mx-1">
                <div class="mx-4 my-3">
                    <!-- title -->
                    <div class="text-center">
                        <h2>Winrate Calculator</h2>
                        <h4>Mobile Legends</h4>
                    </div>
                    <!-- alert -->
                    <div id="resultAlert" class="alert alert-info show my-0">
                        <p id="resultText" class="my-0">Calculate your winrate here.</p>
                    </div>
                    <!-- form -->
                    <form>
                        <label for="tMatch" class="col-sm-3 col-form-label">Total Match</label>
                        <input type="text" class="form-control" id="tMatch" value="" placeholder="Ex. 432">
                        <label for="tMatch" class="col-sm-3 col-form-label">Current Winrate</label>
                        <input type="text" class="form-control" id="tWr" value="" placeholder="Ex. 45.6">
                        <label for="tMatch" class="col-sm-4 col-form-label">Desired Winrate</label>
                        <input type="text" class="form-control" id="wrReq" value="" placeholder="Ex. 75.6">
                        <button type="button" id="hitung" class="d-block w-100 btn btn-dark mt-3">Calculate</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        const button = document.querySelector("#hitung");
        const resultAlert = document.querySelector("#resultAlert");
        const resultText = document.querySelector("#resultText");

        function validation() {
            const tMatch = parseInt(document.querySelector("#tMatch").value);
            const tWr = parseFloat(document.querySelector("#tWr").value);
            const wrReq = parseFloat(document.querySelector("#wrReq").value);

            const resultNum = rumus(tMatch, tWr, wrReq);
            const loseNum = rumusLose(tMatch, tWr, wrReq);

            let text = "";
            if (isNaN(tMatch) || isNaN(tWr) || isNaN(wrReq)) {
                text = `Please fill the field first, or the value is not a number.`;
                display(text, 'err');
            } else if (tMatch < 0 || tWr < 0 || wrReq < 0) {
                text = `The field value can't be less than zero`;
                display(text, 'err');
            } else if (tWr == 100 && wrReq == 100) {
                text = `You need <b>zero</b> win without lose to get <b>${wrReq}%</b> win rate`;
                display(text);
            } else if (wrReq > 100 || tWr > 100) {
                text = `Win rate can't be more than <b>100%</b>`;
                display(text, 'err');
            } else if (tWr > wrReq) {
                text = `You need <b>${loseNum}</b> lose without win to get <b>${wrReq}%</b> win rate`;
                display(text);
            } else {
                text = `You need <b>${resultNum}</b> win without lose to get <b>${wrReq}%</b> win rate`;
                display(text);
            }
        }

        function display(text, type) {

            if (type === 'err') {
                ["alert-danger", "show"].forEach(v => resultAlert.classList.add(v));
                return resultText.innerHTML = text;
            }
            
            if (resultAlert.className.includes("alert-danger")) {
                resultAlert.classList.remove("alert-danger");
                resultAlert.classList.add("alert-info");
                return resultText.innerHTML = text;
            }
            ["alert-info", "show"].forEach(v => resultAlert.classList.add(v));
            return resultText.innerHTML = text;
        }

        function rumus(tMatch, tWr, wrReq) {
            let tWin = tMatch * (tWr / 100);
            let tLose = tMatch - tWin;
            let sisaWr = 100 - wrReq;
            let wrResult = 100 / sisaWr;
            let seratusPersen = tLose * wrResult;
            let final = seratusPersen - tMatch;
            return Math.round(final).toLocaleString("id-ID");
        }

        function rumusLose(tMatch, tWr, wrReq) {
            let totalWin = (tMatch * tWr) / 100;
            let win = (totalWin / (wrReq / 100)) - tMatch;
            return Math.round(win).toLocaleString("id-ID");
        }

        // Main
        window.addEventListener("load", init);

        function init() {
            eventListener();
        }

        function eventListener() {
            button.addEventListener("click", validation);
        }
    </script>
</body>

</html>